<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">

  <link th:href="@{/css/bootstrap.css}" rel="stylesheet" href="../static/css/bootstrap.css">
  <link th:href="@{/css/floating-labels.css}" rel="stylesheet" href="../static/css/floating-labels.css">
  <link th:href="@{/css/validar-password.css}" rel="stylesheet" href="../static/css/valdar-password.css">
  <script th:src="@{/js/jquery.3.5.1.js}" src="../static/js/jquery.3.5.1.js" charset="utf-8"></script>
  <script th:src="@{/js/bootstrap.js}" src="../static/js/bootstrap.js" charset="utf-8"></script>

  <title>Administrador de tickets</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" th:href="@{/}" href="#">Administrador de tickets</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">

        <li class="nav-item">
          <a class="nav-link" th:href="@{/}">Inicio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link">Contacto</a>
        </li>

      </ul>
    </div>

    <p th:if=${usuario} class="mb-0 mr-3">Bienvenido, <a class="text-white" th:href="@{/formEdicion}" th:text="${usuario.getNick()}"></a></p>
    <form th:if=${usuario} th:action="@{/cerrarSesion}" class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-light btn-sm my-2 my-sm-0" type="submit">Cerrar Sesión</button>
    </form>

    <form th:unless=${usuario} th:action="@{/inicioSesion}" class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-light btn-sm my-2 my-sm-0 mr-2" type="submit">Iniciar Sesión</button>
    </form>
    <form th:unless=${usuario} th:action="@{/registroUsuario}" class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-light btn-sm my-2 my-sm-0" type="submit">Registrarse</button>
    </form>

  </nav>
  <div class="container mt-3">
    <form class="form-signin" th:action="@{/editar}" th:object="${usuario}" method="POST">
      <div class="text-center mb-4">
        <img class="mb-4" src="/docs/4.5/assets/brand/bootstrap-solid.svg" alt="" width="72" height="72">
      </div>

      <div class="form-label-group">
        <input type="text" id="nombre" class="form-control" placeholder="Nombre" th:field="*{nombre}">
        <label for="nick">Nombre</label>
      </div>

      <div class="form-label-group">
        <input type="text" id="apellidos" class="form-control" placeholder="Apellidos" th:field="*{apellidos}">
        <label for="usuario">Apellidos</label>
      </div>

      <div class="form-label-group">
        <input type="password" id="password" class="form-control" placeholder="Contraseña" th:field="*{password}">
        <label for="password">Contraseña</label>
      </div>

      <div class="form-label-group">
        <input type="password" id="confirmar" class="form-control" placeholder="Confirmar contraseña">
        <label for="confirmar">Confirmar contraseña</label>
      </div>

      <div class="form-label-group" th:if=${usuario.getTipo().equalsIgnoreCase("organizador")}>
        <input type="text" id="cuenta" class="form-control" placeholder="Cuenta bancaria" th:field="*{cuentaBancaria}">
        <label for="usuario">Cuenta Bancaria</label>
      </div>
      <button class="btn btn-lg btn-primary btn-block" id="enviar" type="submit">Editar</button>
    </form>
  </div>
  <script type="text/javascript">
  $(document).ready(function() {
    //variables
    var pass1 = $('[id=password]');
    var pass2 = $('[id=confirmar]');
    var enviar =$('[id=enviar]');
    var confirmacion = "Las contraseñas si coinciden";
    //var longitud = "La contraseña debe estar formada entre 6-10 carácteres (ambos inclusive)";
    var negacion = "No coinciden las contraseñas";
    //var vacio = "La contraseña no puede estar vacía";
    //oculto por defecto el elemento span
    var span = $('<span></span>').insertAfter(pass2);
    span.hide();
    //función que comprueba las dos contraseñas
    function coincidePassword(){
      var valor1 = pass1.val();
      var valor2 = pass2.val();
      //muestro el span
      span.show().removeClass();
      //condiciones dentro de la función
      if(valor1 != valor2){
        span.text(negacion).addClass('negacion');
      }
      /*if(valor1.length==0 || valor1==""){
        span.text(vacio).addClass('negacion');
      }
      if(valor1.length<6 || valor1.length>10){
        span.text(longitud).addClass('negacion');
      }*/
      if(valor1.length!=0 && valor1==valor2){
        span.text(confirmacion).removeClass("negacion").addClass('confirmacion');
      }
    }
    //ejecuto la función al soltar la tecla
    pass2.keyup(function(){
      coincidePassword();
    });
  });
  </script>
</body>
</html>
